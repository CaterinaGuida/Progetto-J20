/* Oggetto di accesso al database per la verifica dell'identità di un controllore */
package dao;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.SimpleDateFormat;

public class DaoLoger {

	private DaoFactory Dao;
	

	public DaoLoger(DaoFactory Dao){
		super();
		this.Dao=Dao;
		
	}
	
	public boolean login(String username,String password) {
		
		Connection con;
		try {
			con = Dao.getConnection();
			Statement st= con.createStatement();
			String query=String.format("select count(*) as num from users where username='%s'",username); 
			ResultSet result= st.executeQuery(query);
			int num=0;
			while(result.next()) {
				num= result.getInt("num");
			}
			if (num>0) {
				query=String.format("select *  from users where username='%s'",username); 
				result= st.executeQuery(query);
				while(result.next()) {
					String pass= result.getString("password");
					if(pass.equals(password)) {
						return true;
					}
					return false;
				}
				
			}
		}
		catch(SQLException e) {
			e.printStackTrace();
		}
		return false;
		
		
	}
}
