/* Questo test permette di verificare l'attivazione di un titolo di viaggio */

package testUnit;

import static org.junit.Assert.*;


import java.sql.*;
import java.text.ParseException;

import org.junit.Test;

import dao.*;
import model.*;

public class ActivationTest {
	
	@Test
	public void test() {
		DaoFactory dao= DaoFactory.getInstance();
		DaoRegister dr= dao.getDaoRegister();
		SingleTicket biglietto= new SingleTicket();
		CumulativeTicket cumulativo = new CumulativeTicket(5);
		String codice1= biglietto.getCodice_titolo();
		String codice2= cumulativo.getCodice_titolo();
		dr.addSingolo(biglietto);
		dr.addCumulativo(cumulativo);
		Connection con;
		
		try {
			DaoActiver da= dao.getDaoActiver();
			assertEquals("Titolo non esistente",da.activate("lol")[0]);
			assertEquals("Titolo Attivato",da.activate(codice1)[0]);
			
			String output[]=da.activate(codice2);
			assertEquals("Titolo cumulativo Attivato",output[0]);
			assertEquals(4,	Integer.parseInt(output[3]));
			
			
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		
	}

}
