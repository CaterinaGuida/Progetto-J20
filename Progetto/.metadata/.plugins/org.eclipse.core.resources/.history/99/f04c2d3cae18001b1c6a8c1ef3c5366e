/* Questo test permette di verificare il controllo di un titolo di viaggio */

package testUnit;

import static org.junit.Assert.*;

import java.sql.*;
import java.text.ParseException;

import org.junit.Test;

import dao.*;
import model.*;

public class CheckTest {
	
	@Test
	public void test() {
		DaoFactory dao= DaoFactory.getInstance();
		DaoPurchase dr= dao.getDaoPurchase();
		SingleTicket biglietto= new SingleTicket();
		String code= biglietto.getTicketCode();
		dr.addSingleTicket(biglietto);
		Connection con;
		
		
		try {
			DaoValidation dc= dao.getDaoValidation();
			DaoActivation da= dao.getDaoActivation();
			assertEquals("Titolo non esistente",dc.check("lol")[0]);
			assertEquals("Titolo non Attivato",dc.check(code)[0]);
			da.activate(code);
			assertEquals("Titolo valido",dc.check(code)[0]);
			
			
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}

}
